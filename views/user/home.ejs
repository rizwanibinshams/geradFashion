
<%- include("../partials/user/header") %>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
</head>
<body class="bg-gray-100">
    <header class="bg-white shadow-md">
        <!-- Add your header content here -->
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- Hero Banner Section -->
        <section class="mb-12 relative overflow-hidden rounded-lg shadow-lg">
            <div class="hero-slider">
                <div class="hero-item relative h-96 bg-cover bg-center" style="background-image: url('img/hero/hero-1.jpg');">
                    <div class="absolute inset-0 bg-black bg-opacity-50"></div>
                    <div class="container mx-auto px-4 h-full flex items-center">
                        <div class="text-white max-w-lg">
                            <h6 class="text-xl mb-2 font-semibold">Summer Collection</h6>
                            <h2 class="text-4xl font-bold mb-4">Fall - Winter Collections 2030</h2>
                            <p class="mb-6">A specialist label creating luxury essentials. Ethically created.</p>
                            <a href="#" class="bg-white text-black px-6 py-3 rounded-full font-semibold hover:bg-gray-200 transition duration-300">
                                Shop now <span class="ml-2">→</span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- Add more hero items here if needed -->
                 
            </div>
        </section>
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 tracking-wide text-gray-800">Shop by Category</h2>
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-6 max-w-6xl mx-auto">
                <a href="#" class="category-item flex flex-col items-center transition-transform transform hover:scale-105">
                    <div class="w-28 h-28 rounded-full bg-blue-600 flex items-center justify-center mb-4 shadow-lg">
                        <i class="fas fa-tshirt text-white text-4xl"></i>
                    </div>
                    <span class="text-base font-semibold text-gray-700">T-Shirt</span>
                </a>
                <a href="#" class="category-item flex flex-col items-center transition-transform transform hover:scale-105">
                    <div class="w-28 h-28 rounded-full bg-green-600 flex items-center justify-center mb-4 shadow-lg">
                        <i class="fas fa-hat-cowboy text-white text-4xl"></i>
                    </div>
                    <span class="text-base font-semibold text-gray-700">Shirt</span>
                </a>
                <a href="#" class="category-item flex flex-col items-center transition-transform transform hover:scale-105">
                    <div class="w-28 h-28 rounded-full bg-yellow-500 flex items-center justify-center mb-4 shadow-lg">
                        <i class="fas fa-socks text-white text-4xl"></i>
                    </div>
                    <span class="text-base font-semibold text-gray-700">Pants</span>
                </a>
                <a href="#" class="category-item flex flex-col items-center transition-transform transform hover:scale-105">
                    <div class="w-28 h-28 rounded-full bg-red-500 flex items-center justify-center mb-4 shadow-lg">
                        <i class="fas fa-tshirt text-white text-4xl transform rotate-45"></i>
                    </div>
                    <span class="text-base font-semibold text-gray-700">Hoodie</span>
                </a>
            </div>
        </section>
        
        <!-- Product Section -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">New Arrivals</h2>
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <% if (products && products.length > 0) { %>
                    <% products.forEach(product => { %>
                        <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden transform transition duration-300 hover:scale-105">
                            <div class="relative">
                                <a href="/productDetails?id=<%= product._id %>" class="product-link" style="text-decoration: none; color: inherit;">
                                <img src="/uploads/product-images/<%= product.productImage[0] %>" alt="<%= product.productName %>" class="w-full h-64 object-cover">
                                </a>
                                <% const discount = Math.abs(((product.regularPrice - product.salePrice) / product.regularPrice) * 100); %>
                                <% if (discount > 0) { %>
                                    <div class="absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                                        <%= discount.toFixed(0) %>% OFF
                                    </div>
                                <% } %>
                                <button class="wishlist-btn absolute top-2 right-2 bg-white p-2 rounded-full text-red-500 hover:text-red-600 transition duration-300">
                                    <i class="fas fa-heart"></i>
                                </button>
                            </div>
                            <div class="p-4">
                                <h3 class="text-lg font-semibold mb-2"><%= product.productName %></h3>
                                <p class="text-sm text-gray-600 mb-2">Brand: <%= product.brand %></p>
                                <div class="flex items-center justify-between mb-2">
                                    <div>
                                        <span class="text-gray-400 line-through text-sm">₹<%= product.regularPrice %></span>
                                        <span class="text-red-500 font-bold ml-2">₹<%= product.salePrice %></span>
                                    </div>
                                    <div class="text-yellow-400">
                                        <% for (let i = 1; i <= 5; i++) { %>
                                            <i class="<%= i <= product.rating ? 'fas' : 'far' %> fa-star"></i>
                                        <% } %>
                                    </div>
                                </div>
                                <button onclick="addToCart('<%= product._id %>')"   data-product-id="<%= product._id %>" class="w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition duration-300">
                                    Add to Cart
                                </button>
                            </div>
                           
                        </div>
                    <% }) %>
                <% } else { %>
                    <p class="col-span-full text-center text-gray-500">No products available.</p>
                <% } %>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-8">
        <!-- Add your footer content here -->
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Hero banner animation
            gsap.from('.hero-item', {
                duration: 1,
                opacity: 0,
                scale: 1.1,
                ease: "power3.out"
            });

            // Product cards animation
            const productCards = document.querySelectorAll('.product-card');
            
            gsap.from(productCards, {
                duration: 0.6,
                opacity: 0,
                y: 50,
                stagger: 0.1,
                ease: "power2.out"
            });

            productCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    gsap.to(card, {
                        duration: 0.3,
                        y: -10,
                        boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1),inters0 10px 10px -5px rgba(0, 0, 0, 0.04)"
                    });
                });

                card.addEventListener('mouseleave', () => {
                    gsap.to(card, {
                        duration: 0.3,
                        y: 0,
                        boxShadow: "0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"
                    });
                });
            });

            const wishlistBtns = document.querySelectorAll('.wishlist-btn');
            wishlistBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    gsap.to(btn, {
                        duration: 0.1,
                        scale: 1.2,
                        yoyo: true,
                        repeat: 1
                    });
                });
            });
        });

        async function addToCart(productId) {
        try {
            const response = await fetch('/addToCart', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ productId })
            });
            if (response.ok) {
                alert('Product added to cart!');
                window.location.reload();
            } else {
                alert('Failed to add to cart. Try again.');
            }
        } catch (error) {
            alert('Error occurred. Try again.');
        }
    }
    </script>
</body>
</html>

<%-include("../partials/user/footer")%>